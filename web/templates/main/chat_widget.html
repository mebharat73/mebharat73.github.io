<!-- Chat Section -->
<head>
    <!-- ... other CSS files ... -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  </head>

    <div class="chat-widget">
        <div class="chat-header">
            <span>Chat with our support team</span>
            <button class="chat-close-btn">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="chat-messages">
            <div id="chat-box">
                <ul class="message-list">
                    <!-- message list will be rendered here -->
                </ul>
            </div>
        </div>
        <div class="chat-input">
            <input type="text" id="chat-input" placeholder="Type a message...">
            <button class="chat-send-btn">
                <i class="fas fa-paper-plane"></i>
                Send
            </button>
        </div>
    </div>
  
  

  <script>
    var roomName = 'my_room';
    var socket = new WebSocket('ws://localhost:8000/ws/chat/' + roomName + '/');

    // Handle incoming messages
    socket.onmessage = function(event) {
        console.log('Received message:', event.data);
        var messageData = JSON.parse(event.data);
        console.log('Message data:', messageData);
        // Update your chat box with the new message
        var chatBox = document.getElementById('chat-box');
        var messageElement = document.createElement('p');
        messageElement.textContent = `${messageData.sender}: ${messageData.message}`;
        chatBox.appendChild(messageElement);
    };

    // Handle WebSocket connection open
    socket.onopen = function(event) {
        console.log('WebSocket connection established');
    };

    // Handle WebSocket connection close
    socket.onclose = function(event) {
        console.log('WebSocket connection closed');
    };

    // Handle WebSocket connection error
    socket.onerror = function(event) {
        console.error('WebSocket connection error:', event);
    };

    // Send message when "Send" button is clicked
    document.querySelector('.chat-send-btn').addEventListener('click', function() {
        var messageInput = document.getElementById('chat-input');
        var message = messageInput.value;
        var messageData = {
            'message': message
        };
        try {
            socket.send(JSON.stringify(messageData));
        } catch (error) {
            console.error('Error sending message:', error);
        }
        messageInput.value = ''; // Clear the input field
    });
  </script>


  
  <style>
    .chat-widget {
      background-color: #f7f7f7;
      border: 1px solid #ddd;
      padding: 5px;
      border-radius: 10px;
      width: 310px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    
    .chat-header {
      background-color: #333;
      color: #fff;
      padding: 2px;
      border-bottom: 1px solid #333;
      display: flex;
      border: 1px solid #ccc;
      border-radius: 7px;
      justify-content: space-between;
      align-items: center;
    }
    
    .chat-header span {
      font-size: 17px;
      font-weight: bold;
      padding: 6px;
    }
    
    .chat-close-btn {
      background-color: transparent;
      border: none;
      padding: 10px;
      cursor: pointer;
    }
    
    .chat-close-btn i {
      font-size: 10px;
      color: #fff;
    }
    
    .chat-messages {
      padding: 0px;
    }
    
    .message-list {
      list-style: none;
      padding: 3px;
      margin: 0;
    }
    
    .message-list li {
      padding: 5px;
      border-bottom: 1px solid #ccc;
    }
    
    .message-list li:last-child {
      border-bottom: none;
    }
    
    .chat-input {
      padding: 3px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .chat-input input[type="text"] {
      width: 73%;
      padding: 3px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    
    .chat-send-btn {
      background-color: #4CAF50;
      color: #fff;
      padding: 2px 3px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
    }
    
    .chat-send-btn i {
      font-size: 10px;
      margin-right: 3px;
    }
    
    .chat-send-btn:hover {
      background-color: #3e8e41;
    }  
  
  </style>